headlineNumbers:
  - caption: Tests processed
    valueItems:

      - label: Daily (pillars 1 & 2)
        value: newPillarOneTwoTestsByPublishDate
        tooltip: Daily number of tests processed (pillars 1 and 2), reported up to {date}

      - label: Total (pillars 1 & 2)
        value: cumPillarOneTwoTestsByPublishDate
        tooltip: Total number of tests processed (pillars 1 & 2), reported up to {date}

  - caption: Testing capacity
    valueItems:

      - label: Pillars 1 & 2
        value: capacityPillarOneTwo
        tooltip: Estimated pillar 1 & 2 capacity reported by laboratories on {date}

# {{ StartDevOnlyBlock }}

  - caption: PCR Tests processed (Dev Only)
    valueItems:
      - label: Daily
        value: newPCRTestsByPublishDate
        tooltip: Daily number of new PCR tests processed, reported on {date}
      - label: Total
        value: cumPCRTestsByPublishDate
        tooltip: Cumulative total number of PCR tests processed, reported up to {date}

  - caption: PCR Testing capacity (Dev Only)
    valueItems:
        value: plannedPCRCapacityByPublishDate
        tooltip: Estimated PCR testing capacity reported by laboratories on {date}

# {{ EndDevOnlyBlock }}
##############################################################################################################################

cards:

##############################################################################################################################

# Only shown for UK

  - heading: Testing and capacity, by pillar
    cardType: chart
    locationAware:
      included: 
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of lab-confirmed positive or negative COVID-19 test results, by pillar, by date reported.  This is a 
      count of test results and may include multiple tests for an individual person.  Pillar breakdown options 
      provide estimates for PCR swab testing (pillars 1 & 2), antibody serology testing (pillar 3) and surveillance 
      testing (pillar 4). Testing capacity is a projection based on reports from labs on how many tests they have 
      capacity to carry out each day based on availability of staff and resources.

    download:
      - plannedCapacityByPublishDate
      - capacityPillarOne
      - capacityPillarTwo
      - capacityPillarThree
      - capacityPillarFour
      - capacityPillarOneTwo
      - newTestsByPublishDate
      - newPillarOneTestsByPublishDate
      - newPillarTwoTestsByPublishDate
      - newPillarThreeTestsByPublishDate
      - newPillarFourTestsByPublishDate
      - newPillarOneTwoTestsByPublishDate
      - cumTestsByPublishDate
      - cumPillarOneTwoTestsByPublishDate

    options:
      type: radio
      heading: null
      choices:
        - Pillars 1 2
        - Pillar 3
        - Pillar 4

    Pillars 1 2:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Tests processed (pillars 1 & 2)
              value: newPillarOneTwoTestsByPublishDate
              tooltip: Daily number of tests processed by date reported (pillars 1 & 2)
              type: bar
              colour: 0
              rollingAverage: false

            - label: Tests processed (pillars 1 & 2, 7-day average)
              value: newPillarOneTwoTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of tests processed (pillars 1 & 2)
              type: line
              colour: 3
              fill: false
              rollingAverage: true

            - label: Testing capacity (pillars 1 & 2)
              value: capacityPillarOneTwo
              tooltip: Estimated daily capacity reported by laboratories (pillars 1 & 2)
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: normal
          fields:
            - label: Tests processed (pillars 1 & 2)
              value: cumPillarOneTwoTestsByPublishDate
              tooltip: Cumulative number of tests processed (pillars 1 & 2) by date reported
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily tests processed (pillars 1 & 2)
              value: newPillarOneTwoTestsByPublishDate
              type: numeric
              tooltip: Daily number of tests processed by date reported (pillars 1 & 2)

            - label: Cumulative tests processed (pillars 1 & 2)
              value: cumPillarOneTwoTestsByPublishDate
              type: numeric
              tooltip: Cumulative number of tests processed by date reported (pillars 1 & 2)

            - label: Lab capacity (pillars 1 & 2)
              value: capacityPillarOneTwo
              type: numeric
              tooltip: Estimated daily capacity reported by laboratories (pillars 1 & 2)

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

    Pillar 3:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Tests processed (pillar 3)
              value: newPillarThreeTestsByPublishDate
              tooltip: Daily number of tests processed by date reported (pillar 3)
              type: bar
              colour: 0
              rollingAverage: false

            - label: Tests processed (pillar 3, 7-day average)
              value: newPillarThreeTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of tests processed (pillar 3)
              type: line
              colour: 3
              fill: false
              rollingAverage: true

            - label: Testing capacity (pillar 3)
              value: capacityPillarThree
              tooltip: Estimated daily capacity reported by laboratories (pillar 3)
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily tests processed (pillar 3)
              value: newPillarThreeTestsByPublishDate
              type: numeric
              tooltip: Daily number of tests processed by date reported (pillar 3)

            - label: Lab capacity (pillar 3)
              value: capacityPillarThree
              type: numeric
              tooltip: Estimated daily capacity reported by laboratories (pillar 3)

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

    Pillar 4:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Tests processed (pillar 4)
              value: newPillarFourTestsByPublishDate
              tooltip: Daily number of tests processed by date reported (pillar 4)
              type: bar
              colour: 0
              rollingAverage: false

            - label: Tests processed (pillar 4, 7-day average)
              value: newPillarFourTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of tests processed (pillar 4)
              type: line
              colour: 3
              fill: false
              rollingAverage: true

            - label: Testing capacity (pillar 4)
              value: capacityPillarFour
              tooltip: Estimated daily capacity reported by laboratories (pillar 4)
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily tests processed (pillar 4)
              value: newPillarFourTestsByPublishDate
              type: numeric
              tooltip: Daily number of tests processed by date reported (pillar 4)

            - label: Lab capacity (pillar 4)
              value: capacityPillarFour
              type: numeric
              tooltip: Estimated daily capacity reported by laboratories (pillar 4)

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

##############################################################################################################################

# {{ StartDevOnlyBlock }}
# Only shown for UK

  - heading: Testing and capacity, by test type
    cardType: chart
    locationAware:
      included: 
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of lab-confirmed positive or negative COVID-19 test results, by test type, by date reported.  This is a 
      count of test results and may include multiple tests for an individual person.  PCR swab tests test for the 
      presence of COVID-19 and include all pillar 1 and 2 tests and, for England, any PCR swab tests undertaken in 
      pillar 4.  Antibody serology tests test for COVID-19 antobodies and include pillar 3 tests and, in England, 
      any antibody serology tests undertaken in pillar 4.  Testing capacity is a projection based on reports from 
      labs on how many tests they have capacity to carry out each day based on availability of staff and resources.

    download:
      - plannedPCRCapacityByPublishDate
      - plannedAntibodyCapacityByPublishDate
      - newPCRTestsByPublishDate
      - cumPCRTestsByPublishDate
      - newAntibodyTestsByPublishDate
      - cumAntibodyTestsByPublishDate

    options:
      type: radio
      heading: null
      choices:
        - PCR swab
        - Antibody serology

    PCR swab:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: PCR tests processed
              value: newPCRTestsByPublishDate
              tooltip: Daily number of PCR swab tests processed by date reported
              type: bar
              colour: 0
              rollingAverage: false

            - label: PCR tests processed (7-day average)
              value: newPCRTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of PCR swab tests processed
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3

            - label: PCR testing capacity
              value: plannedPCRCapacityByPublishDate
              tooltip: Estimated daily capacity for PCR swab testing reported by laboratories
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: normal
          fields:
            - label: PCR tests processed
              value: cumPCRTestsByPublishDate
              tooltip: Cumulative number of PCR swab tests processed by date reported
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily PCR tests processed
              value: newPCRTestsByPublishDate
              type: numeric
              tooltip: Daily number of PCR swab tests processed by date reported

            - label: Cumulative PCR tests processed
              value: cumPCRTestsByPublishDate
              type: numeric
              tooltip: Cumulative number of PCR swab tests processed by date reported

            - label: Lab capacity for PCR tests
              value: plannedPCRCapacityByPublishDate
              type: numeric
              tooltip: Estimated daily capacity for PCR swab testing reported by laboratories

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

    Antibody serology:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Antibody serology tests processed
              value: newAntibodyTestsByPublishDate
              tooltip: Daily number of Antibody serology tests processed by date reported
              type: bar
              colour: 0
              rollingAverage: false

            - label: Antibody tests processed (7-day average)
              value: newAntibodyTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of Antibody serology tests processed
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3

            - label: Antibody testing capacity
              value: plannedAntibodyCapacityByPublishDate
              tooltip: Estimated daily capacity for Antibody serology testing reported by laboratories
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: normal
          fields:
            - label: Antibody tests processed
              value: cumAntibodyTestsByPublishDate
              tooltip: Cumulative number of Antibody serology tests processed by date reported
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily Antibody tests processed
              value: newAntibodyTestsByPublishDate
              type: numeric
              tooltip: Daily number of Antibody serology tests processed by date reported

            - label: Cumulative Antibody tests processed
              value: cumAntibodyTestsByPublishDate
              type: numeric
              tooltip: Cumulative number of Antibody serology tests processed by date reported

            - label: Lab capacity for Antibody tests
              value: plannedAntibodyCapacityByPublishDate
              type: numeric
              tooltip: Estimated daily capacity for Antibody testing reported by laboratories

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

# {{ EndDevOnlyBlock }}

##############################################################################################################################

  - heading: Tests processed by Pillar
    cardType: chart
    fullWidth: true
    abstract: >
      Number of lab-confirmed positive or negative COVID-19 test results, by pillar (type of testing),
      by date reported. This is a count of test results and may include multiple tests for an
      individual person. Data for antibody and surveillance testing (pillars 3 and 4) are only
      available for the UK as a whole.

    download:
      - newPillarOneTestsByPublishDate
      - newPillarTwoTestsByPublishDate
      - newPillarThreeTestsByPublishDate
      - newPillarFourTestsByPublishDate
      - newTestsByPublishDate
      - cumPillarOneTestsByPublishDate
      - cumPillarTwoTestsByPublishDate
      - cumPillarThreeTestsByPublishDate
      - cumPillarFourTestsByPublishDate
      - cumTestsByPublishDate

    tabs:
      - heading: Daily
        tabType: chart
        barType: stack
        fields:
          - label: Pillar 1 (NHS and, in England, PHE)
            value: newPillarOneTestsByPublishDate
            tooltip: Daily number of COVID-19 tests processed by NHS (and, in England, PHE) labs by date reported
            type: bar
            colour: 0
            rollingAverage: false

          - label: Pillar 2 (UK Government testing programme)
            value: newPillarTwoTestsByPublishDate
            tooltip: Daily number of COVID-19 tests processed by UK Government testing programme by date reported
            type: bar
            colour: 3
            rollingAverage: false

          - label: Pillar 3 (Antibody)
            value: newPillarThreeTestsByPublishDate
            tooltip: Daily number of COVID-19 antibody tests by date reported
            type: bar
            colour: 4
            rollingAverage: false

          - label: Pillar 4 (Surveillance)
            value: newPillarFourTestsByPublishDate
            tooltip: Daily number of COVID-19 surveillance tests by date reported
            type: bar
            colour: 1
            rollingAverage: false

          # Hiding the rolling averages here at the moment because the series are all either broken,
          # inconsistent or very short  

          # - label: Tests (7-day average)
          #   value: newTestsByPublishDate
          #   tooltip: 7 day rolling average of the daily number of tests processed (all pillars)
          #   type: line
          #   colour: 10
          #   fill: false
          #   rollingAverage: true

      - heading: Cumulative
        tabType: chart
        barType: stack
        fields:
          - label: Pillar 1 (NHS and, in England, PHE)
            value: cumPillarOneTestsByPublishDate
            tooltip: Cumulative total number of COVID-19 tests processed by NHS (and, in England, PHE) labs by date reported
            type: bar
            colour: 0
            rollingAverage: false

          - label: Pillar 2 (UK Government testing programme)
            value: cumPillarTwoTestsByPublishDate
            tooltip: Cumulative total number of COVID-19 tests processed by UK Government testing programme by date reported
            type: bar
            colour: 3
            rollingAverage: false

          - label: Pillar 3 (Antibody)
            value: cumPillarThreeTestsByPublishDate
            tooltip: Cumulative total number of COVID-19 antibody tests by date reported
            type: bar
            colour: 4
            rollingAverage: false

          - label: Pillar 4 (Surveillance)
            value: cumPillarFourTestsByPublishDate
            tooltip: Cumulative total number of COVID-19 surveillance tests by date reported
            type: bar
            colour: 1
            rollingAverage: false

      - heading: Daily data
        tabType: table
        fields:
          - label: Date reported
            value: date
            type: date
            tooltip: Date reported on coronavirus.data.gov.uk

          - label: Pillar 1
            value: newPillarOneTestsByPublishDate
            type: numeric
            tooltip: Daily number of COVID-19 tests processed by NHS (and, in England, PHE) labs by date reported

          - label: Pillar 2
            value: newPillarTwoTestsByPublishDate
            type: numeric
            tooltip: Daily number of COVID-19 tests processed by UK Government testing programme by date reported

          - label: Pillar 3
            value: newPillarThreeTestsByPublishDate
            type: numeric
            tooltip: Daily number of COVID-19 antibody tests by date reported

          - label: Pillar 4
            value: newPillarFourTestsByPublishDate
            type: numeric
            tooltip: Daily number of COVID-19 surveillance tests by date reported

          - label: All pillars
            value: newTestsByPublishDate
            type: numeric
            tooltip: Daily number of tests processed by date reported

      - heading: Cumulative data
        tabType: table
        fields:
          - label: Date reported
            value: date
            type: date
            tooltip: Date reported on coronavirus.data.gov.uk

          - label: Pillar 1
            value: cumPillarOneTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of COVID-19 tests processed by NHS (and, in England, PHE) labs by date reported

          - label: Pillar 2
            value: cumPillarTwoTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of COVID-19 tests processed by UK Government testing programme by date reported

          - label: Pillar 3
            value: cumPillarThreeTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of COVID-19 antibody tests by date reported

          - label: Pillar 4
            value: cumPillarFourTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of COVID-19 surveillance tests by date reported

          - label: All pillars
            value: cumTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of tests processed by date reported

      - heading: About 
        tabType: metadata
        filename: cardMetadata/testing/cardTestingByPillar.md
