headlineNumbers:

  - caption: Virus tests processed
    valueItems:

      - label: Daily
        value: newPCRTestsByPublishDate
        tooltip: Daily number of new virus tests processed on {date}

      - label: Total
        value: cumPCRTestsByPublishDate
        tooltip: Cumulative total number of virus tests processed up to {date}

  - caption: Virus testing capacity
    valueItems:

      - value: plannedPCRCapacityByPublishDate
        tooltip: Estimated virus testing capacity reported by laboratories for {date}

##############################################################################################################################

cards:

##############################################################################################################################

# Only shown for UK

  - heading: Testing and capacity, by test type
    cardType: chart
    locationAware:
      included: 
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of confirmed positive, negative or void lab-based COVID-19 test results, by test type.  
      This is a count of test results and may include multiple tests for an individual person.  Virus tests test for 
      the presence of COVID-19 and include all pillar 1 and 2 lab-based tests and any virus tests undertaken 
      in pillar 4.  Antibody serology tests test for COVID-19 antibodies and include pillar 3 tests and any antibody 
      serology tests undertaken in pillar 4.  Testing capacity is a projection based on reports from labs on how 
      many lab-based tests they have capacity to carry out each day based on availability of staff and resources.

    download:
      - plannedPCRCapacityByPublishDate
      - plannedAntibodyCapacityByPublishDate
      - newPCRTestsByPublishDate
      - cumPCRTestsByPublishDate
      - newAntibodyTestsByPublishDate
      - cumAntibodyTestsByPublishDate

    options:
      type: radio
      heading: null
      choices:
        - Virus tests
        - Antibody tests

    Virus tests:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Virus tests processed
              value: newPCRTestsByPublishDate
              tooltip: Daily number of virus tests processed
              type: bar
              colour: 0
              rollingAverage: false

            - label: Virus tests processed (7-day average)
              value: newPCRTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of virus tests processed on {date}
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3

            - label: Virus testing capacity
              value: plannedPCRCapacityByPublishDate
              tooltip: Estimated daily capacity for virus testing reported by laboratories for {date}
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: normal
          fields:
            - label: Virus tests processed
              value: cumPCRTestsByPublishDate
              tooltip: Cumulative number of virus tests processed up to {date}
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily virus tests processed
              value: newPCRTestsByPublishDate
              type: numeric
              tooltip: Daily number of virus tests processed on {date}

            - label: Cumulative virus tests processed
              value: cumPCRTestsByPublishDate
              type: numeric
              tooltip: Cumulative number of virus tests processed up to {date}

            - label: Virus testing capacity
              value: plannedPCRCapacityByPublishDate
              type: numeric
              tooltip: Estimated daily capacity for virus testing reported by laboratories for {date}

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

    Antibody tests:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: normal
          fields:
            - label: Antibody tests processed
              value: newAntibodyTestsByPublishDate
              tooltip: Daily number of antibody serology tests processed on {date}
              type: bar
              colour: 0
              rollingAverage: false

            - label: Antibody tests processed (7-day average)
              value: newAntibodyTestsByPublishDate
              tooltip: 7 day rolling average of the daily number of antibody serology tests processed
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3

            - label: Antibody testing capacity
              value: plannedAntibodyCapacityByPublishDate
              tooltip: Estimated daily capacity for antibody serology testing reported by laboratories for {date}
              type: line
              colour: 6
              fill: true
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: normal
          fields:
            - label: Antibody tests processed
              value: cumAntibodyTestsByPublishDate
              tooltip: Cumulative number of antibody serology tests processed up to {date}
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily antibody tests processed
              value: newAntibodyTestsByPublishDate
              type: numeric
              tooltip: Daily number of antibody serology tests processed on {date}

            - label: Cumulative antibody tests processed
              value: cumAntibodyTestsByPublishDate
              type: numeric
              tooltip: Cumulative number of antibody serology tests processed up to {date}

            - label: Antibody testing capacity
              value: plannedAntibodyCapacityByPublishDate
              type: numeric
              tooltip: Estimated daily capacity for antibody testing reported by laboratories for {date}

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardTestingAndCapacity.md

##############################################################################################################################

# only shown for UK

  - heading: Testing capacity by Pillar
    cardType: chart
    locationAware:
      included:
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Testing capacity is a projection based on reports from labs on how many lab-based tests they have capacity 
      to carry out each day based on availability of staff and resources.

    download:
      - plannedCapacityByPublishDate
      - capacityPillarOne
      - capacityPillarTwo
      - capacityPillarThree
      - capacityPillarFour 

    tabs:
      - heading: Data
        tabType: table

        fields:
          - label: Date
            value: date
            type: date
            tooltip: ""

          - label: Pillar 1
            value: capacityPillarOne
            type: numeric
            tooltip: Estimated daily capacity for pillar 1 testing reported by laboratories up to {date}

          - label: Pillar 2
            value: capacityPillarTwo
            type: numeric
            tooltip: Estimated daily capacity for pillar 2 testing reported by laboratories up to {date}

          - label: Pillar 3
            value: capacityPillarThree
            type: numeric
            tooltip: Estimated daily capacity for pillar 3 testing reported by laboratories up to {date}

          - label: Pillar 4
            value: capacityPillarFour
            type: numeric
            tooltip: Estimated daily capacity for pillar 4 testing reported by laboratories up to {date}

          - label: Total
            value: plannedCapacityByPublishDate
            type: numeric
            tooltip: Estimated daily capacity for testing, across all pillars, reported by laboratories up to {date}

      - heading: About 
        tabType: metadata
        filename: cardMetadata/testing/cardCapacityByPillar.md

##############################################################################################################################

  - heading: Tests processed by Pillar
    cardType: chart
    fullWidth: true
    abstract: >
      Number of confirmed positive, negative or void lab-based COVID-19 test results, by pillar. 
      This is a count of test results and may include multiple tests for an individual person. 
      Data for surveillance testing (pillar 4) are only available for the UK as a whole.

    download:
      - newPillarOneTestsByPublishDate
      - newPillarTwoTestsByPublishDate
      - newPillarThreeTestsByPublishDate
      - newPillarFourTestsByPublishDate
      - newTestsByPublishDate
      - cumPillarOneTestsByPublishDate
      - cumPillarTwoTestsByPublishDate
      - cumPillarThreeTestsByPublishDate
      - cumPillarFourTestsByPublishDate
      - cumTestsByPublishDate

    tabs:
      - heading: Daily
        tabType: chart
        barType: stack
        fields:
          - label: Pillar 1 (NHS and, in England, PHE)
            value: newPillarOneTestsByPublishDate
            tooltip: Daily number of lab-based COVID-19 tests processed by NHS (and, in England, PHE) labs on {date}
            type: bar
            colour: 0
            rollingAverage: false

          - label: Pillar 2 (UK Government testing programme)
            value: newPillarTwoTestsByPublishDate
            tooltip: Daily number of lab-based COVID-19 tests processed by UK Government testing programme on {date}
            type: bar
            colour: 3
            rollingAverage: false

          - label: Pillar 3 (Antibody)
            value: newPillarThreeTestsByPublishDate
            tooltip: Daily number of lab-based COVID-19 antibody tests processed on {date}
            type: bar
            colour: 4
            rollingAverage: false

          - label: Pillar 4 (Surveillance)
            value: newPillarFourTestsByPublishDate
            tooltip: Daily number of lab-based COVID-19 surveillance tests processed on {date}
            type: bar
            colour: 1
            rollingAverage: false

      - heading: Cumulative
        tabType: chart
        barType: stack
        fields:
          - label: Pillar 1 (NHS and, in England, PHE)
            value: cumPillarOneTestsByPublishDate
            tooltip: Cumulative total number of lab-based COVID-19 tests processed by NHS (and, in England, PHE) laboratories up to {date}
            type: bar
            colour: 0
            rollingAverage: false

          - label: Pillar 2 (UK Government testing programme)
            value: cumPillarTwoTestsByPublishDate
            tooltip: Cumulative total number of lab-based COVID-19 tests processed by UK Government testing programme up to {date}
            type: bar
            colour: 3
            rollingAverage: false

          - label: Pillar 3 (Antibody)
            value: cumPillarThreeTestsByPublishDate
            tooltip: Cumulative total number of lab-based COVID-19 antibody tests processed up to {date}
            type: bar
            colour: 4
            rollingAverage: false

          - label: Pillar 4 (Surveillance)
            value: cumPillarFourTestsByPublishDate
            tooltip: Cumulative total number of lab-based COVID-19 surveillance tests processed up to {date}
            type: bar
            colour: 1
            rollingAverage: false

      - heading: Daily data
        tabType: table
        fields:
          - label: Date reported
            value: date
            type: date
            tooltip: Date reported on coronavirus.data.gov.uk

          - label: Pillar 1
            value: newPillarOneTestsByPublishDate
            type: numeric
            tooltip: Daily number of lab-based COVID-19 tests processed by NHS (and, in England, PHE) laboratories on {date}

          - label: Pillar 2
            value: newPillarTwoTestsByPublishDate
            type: numeric
            tooltip: Daily number of lab-based COVID-19 tests processed by UK Government testing programme on {date}

          - label: Pillar 3
            value: newPillarThreeTestsByPublishDate
            type: numeric
            tooltip: Daily number of lab-based COVID-19 antibody tests processed on {date}

          - label: Pillar 4
            value: newPillarFourTestsByPublishDate
            type: numeric
            tooltip: Daily number of lab-based COVID-19 surveillance tests processed on {date}

          - label: All pillars
            value: newTestsByPublishDate
            type: numeric
            tooltip: Daily number of lab-based COVID-19 tests processed on {date}

      - heading: Cumulative data
        tabType: table
        fields:
          - label: Date reported
            value: date
            type: date
            tooltip: Date reported on coronavirus.data.gov.uk

          - label: Pillar 1
            value: cumPillarOneTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of lab-based COVID-19 tests processed by NHS (and, in England, PHE) laboratories up to {date}

          - label: Pillar 2
            value: cumPillarTwoTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of lab-based COVID-19 tests processed by UK Government testing programme up to {date}

          - label: Pillar 3
            value: cumPillarThreeTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of lab-based COVID-19 antibody tests processed up to {date}

          - label: Pillar 4
            value: cumPillarFourTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of lab-based COVID-19 surveillance tests processed up to {date}

          - label: All pillars
            value: cumTestsByPublishDate
            type: numeric
            tooltip: Cumulative total number of lab-based COVID-19 tests processed up to {date}

      - heading: About 
        tabType: metadata
        filename: cardMetadata/testing/cardTestingByPillar.md
