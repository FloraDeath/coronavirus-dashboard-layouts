headlineNumbers:
  - caption: People tested positive
    valueItems:
      - label: Daily
        value: newCasesByPublishDate
        tooltip: Daily number of new people with a lab-confirmed positive test result reported on {date}

      - label: Total
        value: cumCasesByPublishDate
        tooltip: Cumulative total number of people with a lab-confirmed positive test result reported up to {date}
        
# {{ StartDevOnlyBlock }}
# People tested not currently being published

  - caption: All people tested (Dev Only)
    valueItems:
      - label: Daily
        value: newPeopleTestedByPublishDate
        tooltip: Daily number of new people tested (positive or negative) reported on {date}

      - label: Total
        value: cumPeopleTestedByPublishDate
        tooltip: Cumulative total number of people tested (positive or negative) reported up to {date}

# {{ EndDevOnlyBlock }}

##############################################################################################################################

cards:

##############################################################################################################################

# Only shown for UK

  - heading: Cases by specimen date, by nation
    cardType: multiAreaStatic
    locationAware:
      included: 
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of people with at least one lab-confirmed positive COVID-19 test result, by specimen date, 
      by nation.  Individuals tested positive more than once are only counted once, on the date of 
      their first positive test.

    download:
      - newCasesBySpecimenDate
      - cumCasesBySpecimenDate
      
    options:
      type: radio
      heading: null
      choices:
        - By nation
        - UK total
    
    By nation:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: stack
          colours: [0, 9, 3, 10] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: nation

          fields:
            - label: "Number of cases"
              value: newCasesBySpecimenDate
              tooltip: Daily number of new people with a lab-confirmed positive test result, resident in each nation, by specimen date
              type: bar
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: stack
          colours: [0, 9, 3, 10] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: nation

          fields:
            - label: "Number of cases"
              value: cumCasesBySpecimenDate
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, resident in each nation, by specimen date
              type: bar
              rollingAverage: false

        - heading: Data
          tabType: table
          params:
            - key: areaType
              sign: "="
              value: nation
        
          fields:
            - label: Specimen date
              value: date
              type: date
              tooltip: Date the sample was taken from the person

            - label: daily
              value: newCasesBySpecimenDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result, resident in each nation, by specimen date

            - label: total
              value: cumCasesBySpecimenDate
              type: numeric
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, resident in each nation, by specimen date

        - heading: About 
          tabType: metadata
          filename: cardMetadata/cases/cardCasesTimeSeries.md

    UK total:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: stack
          colours: [0] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: overview

          fields:
            - label: "Number of cases"
              value: newCasesBySpecimenDate
              tooltip: Daily number of new people with a lab-confirmed positive test result, by specimen date
              type: bar
              rollingAverage: false

            - label: Cases (7-day average)
              value: newCasesBySpecimenDate
              tooltip: 7 day rolling average of the daily number of cases by specimen date
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3 #no of days to exclude for incomplete data

        - heading: Cumulative
          tabType: chart
          barType: stack
          colours: [0] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: overview

          fields:
            - label: "Number of cases"
              value: cumCasesBySpecimenDate
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, by specimen date
              type: bar
              rollingAverage: false

        - heading: Data
          tabType: table
          params:
            - key: areaType
              sign: "="
              value: overview
        
          fields:
            - label: Specimen date
              value: date
              type: date
              tooltip: Date the sample was taken from the person

            - label: daily
              value: newCasesBySpecimenDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result, by specimen date

            - label: total
              value: cumCasesBySpecimenDate
              type: numeric
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, by specimen date

        - heading: About 
          tabType: metadata
          filename: cardMetadata/cases/cardCasesTimeSeries.md

##############################################################################################################################

# Only shown for UK

  - heading: Cases by date reported, by nation
    cardType: multiAreaStatic
    locationAware:
      included: 
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of individuals who have had at least one lab-confirmed positive COVID-19 test result, by date
      reported, by nation.  Initially only pillar 1 tests (NHS and, in England, PHE labs) were included but
      pillar 2 (commercial tests) have been included from varying dates between 15th June and 14th July for
      each nation. On 2 July, case data from pillars 1 and 2 of the testing programme were combined and 
      de-duplicated.  These adjustments explain the step changes that can be seen in the numbers of cases 
      reported on specific dates.
      
    download:
      - newCasesByPublishDate
      - cumCasesByPublishDate
      
    options:
      type: radio
      heading: null
      choices:
        - By nation
        - UK total
    
    By nation:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: stack
          colours: [0, 9, 3, 10] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: nation

          fields:
            - label: "Number of cases"
              value: newCasesByPublishDate
              tooltip: Daily number of new people with a lab-confirmed positive test result, resident in each nation, by date reported
              type: bar
              rollingAverage: false

        - heading: Cumulative
          tabType: chart
          barType: stack
          colours: [0, 9, 3, 10] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: nation

          fields:
            - label: "Number of cases"
              value: cumCasesByPublishDate
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, resident in each nation, by date reported
              type: bar
              rollingAverage: false

        - heading: Data
          tabType: table
          params:
            - key: areaType
              sign: "="
              value: nation
        
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: daily
              value: newCasesByPublishDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result, resident in each nation, by date reported

            - label: total
              value: cumCasesByPublishDate
              type: numeric
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, resident in each nation, by date reported

        - heading: About 
          tabType: metadata
          filename: cardMetadata/cases/cardCasesTimeSeries.md

    UK total:
      
      tabs:
        - heading: Daily
          tabType: chart
          barType: stack
          colours: [0] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: overview

          fields:
            - label: ""
              value: newCasesByPublishDate
              tooltip: Daily number of new people with a lab-confirmed positive test result, by date reported
              type: bar
              rollingAverage: false

            - label: Cases (7-day average)
              value: newCasesByPublishDate
              tooltip: 7 day rolling average of the daily number of cases by date reported
              type: line
              colour: 3
              fill: false
              rollingAverage:
                window: 7
                clipEnd: 3 #no of days to exclude for incomplete data

        - heading: Cumulative
          tabType: chart
          barType: stack
          colours: [0] # areaNames in alphabetical order
          params:
            - key: areaType
              sign: "="
              value: overview

          fields:
            - label: "Number of cases"
              value: cumCasesByPublishDate
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, by date reported
              type: bar
              rollingAverage: false

        - heading: Data
          tabType: table
          params:
            - key: areaType
              sign: "="
              value: overview
        
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: daily
              value: newCasesByPublishDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result, by date reported

            - label: total
              value: cumCasesByPublishDate
              type: numeric
              tooltip: Cumulative total number of people with a lab-confirmed positive test result, by date reported

        - heading: About 
          tabType: metadata
          filename: cardMetadata/cases/cardCasesTimeSeries.md

##############################################################################################################################

# not shown for UK (has separate radio button card)

  - heading: Daily cases by specimen date
    cardType: chart
    locationAware:
      excluded:
        areaType:
          - overview

    fullWidth: true
    abstract: >
      Number of people with at least one lab-confirmed positive COVID-19 test result, by specimen date.
      Individuals tested positive more than once are only counted once, on the date of their first
      positive test.

    download:
      - newCasesBySpecimenDate
      - cumCasesBySpecimenDate

    tabs:
      - heading: Daily
        tabType: chart
        barType: overlay
        fields:
          - label: Number of cases
            value: newCasesBySpecimenDate
            tooltip: Daily number of new people with a lab-confirmed positive test result by date the sample was taken from the person
            type: bar
            colour: 0
            rollingAverage: false

          - label: Cases (7-day average)
            value: newCasesBySpecimenDate
            tooltip: 7 day rolling average of the daily number of cases by specimen date
            type: line
            colour: 3
            fill: false
            rollingAverage:
              window: 7
              clipEnd: 3 #no of days to exclude for incomplete data

      - heading: Cumulative
        tabType: chart
        fields:
          - label: Number of cases
            value: cumCasesBySpecimenDate
            tooltip: Cumulative total number of new people with a lab-confirmed positive test result by date the sample was taken from the person
            type: bar
            colour: 0
            rollingAverage: false

      - heading: Data
        tabType: table
        fields:
          - label: Specimen date
            value: date
            type: date
            tooltip: Date the sample was taken from the person

          - label: Daily cases
            value: newCasesBySpecimenDate
            type: numeric
            tooltip: Daily number of new people with a lab-confirmed positive test result by date the sample was taken from the person

          - label: Cumulative cases
            value: cumCasesBySpecimenDate
            type: numeric
            tooltip: Cumulative total number of new people with a lab-confirmed positive test result by date the sample was taken from the person

      - heading: About 
        tabType: metadata
        filename: cardMetadata/cases/cardCasesTimeSeries.md

##############################################################################################################################

# Not shown for UK (has separate radio button card) or sub-national (no data previously - could show this now?)

  - heading: Daily cases by date reported
    cardType: chart
    locationAware:
      included:
        areaType:
          - nation

    fullWidth: true
    abstract: >
      Number of individuals who have had at least one lab-confirmed positive COVID-19 test result,
      by date reported. Initially only pillar 1 tests (NHS and, in England, PHE labs) were included
      but commercial tests have been included from varying dates between 15th June and 14th July for
      each nation, leading to step increases in the numbers of cases reported at different times.

    download:
      - newCasesByPublishDate
      - cumCasesByPublishDate

    tabs:
      - heading: Daily
        tabType: chart
        barType: overlay
        fields:
          - label: Number of cases
            value: newCasesByPublishDate
            tooltip: Daily number of new people with a lab-confirmed positive test result by date reported
            type: bar
            colour: 0

          - label: Cases (7-day average)
            value: newCasesByPublishDate
            tooltip: 7 day rolling average of the daily number of new positive cases reported
            type: line
            colour: 3
            fill: false
            rollingAverage: true

      - heading: Cumulative
        tabType: chart
        fields:
          - label: Number of cases
            value: cumCasesByPublishDate
            tooltip: Cumulative total number of people with a lab-confirmed positive test result by date reported
            type: bar
            colour: 0
            rollingAverage: false

      - heading: Data
        tabType: table
        fields:
          - label: Date reported
            value: date
            type: date
            tooltip: Date reported on coronavirus.data.gov.uk

          - label: Daily cases
            value: newCasesByPublishDate
            type: numeric
            tooltip: Daily number of new people with a lab-confirmed positive test result by date reported

          - label: Cumulative cases
            value: cumCasesByPublishDate
            type: numeric
            tooltip: Cumulative total number of people with a lab-confirmed positive test result by date reported

      - heading: About 
        tabType: metadata
        filename: cardMetadata/cases/cardCasesTimeSeries.md

##############################################################################################################################

# {{ StartDevOnlyBlock }}
# not live
# People tested not currently being published

  - heading: Daily people tested (Dev Only)
    cardType: chart
    fullWidth: true
    # TODO: PF to check - had to create additional genPeopleTested not specific to daily/cumulative/by test data/by specimen date.
    # Why is this on the Cases page and repeated on the Tested page - just to show cases and tests side by side?  If so maybe card needs different title?

    abstract: >
      Number of people with at least one lab-confirmed positive or negative COVID-19 test result. 
      Initially only NHS and, in England, PHE tests were included but commercial tests have been included from   
      different dates between 15th June and 14th July for each nation.  National data are not directly comparable.

    download:
      - newCasesBySpecimenDate
      - cumCasesBySpecimenDate
      - newPeopleTestedBySpecimenDate
      - cumPeopleTestedBySpecimenDate

    options:
      type: radio
      heading: null
      choices:
        - Specimen date
        - Reporting date

    Specimen date:
      tabs:
        - heading: Daily
          tabType: chart
          barType: overlay
          fields:
            - label: Number of people tested
              value: newPeopleTestedBySpecimenDate
              tooltip: Daily number of people tested (positive or negative) by date the sample was taken from the person
              type: bar
              colour: 0
              rollingAverage: false

            - label: People tested (7-day average)
              value: newPeopleTestedBySpecimenDate
              tooltip: 7 day rolling average of the daily number of people tested by specimen date
              type: line
              colour: 3
              fill: false
              rollingAverage: true

        - heading: Cumulative
          tabType: chart
          fields:
            - label: Number of people tested
              value: cumPeopleTestedBySpecimenDate
              tooltip: Cumulative total number of people tested (positive or negative) by date the sample was taken from the person
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Specimen date
              value: date
              type: date
              tooltip: Date the sample was taken from the person

            - label: Daily cases
              value: newCasesBySpecimenDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result by date the sample was taken from the person

            - label: Cumulative cases
              value: cumCasesBySpecimenDate
              type: numeric
              tooltip: Cumulative total number of new people with a lab-confirmed positive test result by date the sample was taken from the person

            - label: Daily people tested
              value: newPeopleTestedBySpecimenDate
              type: numeric
              tooltip: Daily number of people tested (positive or negative) by date the sample was taken from the person

            - label: Cumulative people tested
              value: cumPeopleTestedBySpecimenDate
              type: numeric
              tooltip: Cumulative total number of people tested (positive or negative) by date the sample was taken from the person

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardPeopleTested.md

    Reporting date:
      tabs:
        - heading: Daily
          tabType: chart
          barType: overlay
          fields:
            - label: Number of people tested
              value: newPeopleTestedByPublishDate
              tooltip: Daily number of new people tested (positive or negative) by date reported
              type: bar
              colour: 0
              rollingAverage: false

            - label: People tested (7-day average)
              value: newPeopleTestedByPublishDate
              tooltip: 7 day rolling average of the number of new people tested by date reported
              type: line
              colour: 3
              fill: false
              rollingAverage: true

        - heading: Cumulative
          tabType: chart
          fields:                
            - label: Number of people tested
              value: cumPeopleTestedByPublishDate
              tooltip: Cumulative total number of people tested (positive or negative) by date reported
              type: bar
              colour: 0
              rollingAverage: false

        - heading: Data
          tabType: table
          fields:
            - label: Date reported
              value: date
              type: date
              tooltip: Date reported on coronavirus.data.gov.uk

            - label: Daily cases
              value: newCasesByPublishDate
              type: numeric
              tooltip: Daily number of new people with a lab-confirmed positive test result by date reported

            - label: Cumulative cases
              value: cumCasesByPublishDate
              type: numeric
              tooltip: Cumulative total number of people with a lab-confirmed positive test result by date reported

            - label: Daily people tested
              value: newPeopleTestedByPublishDate
              type: numeric
              tooltip: Daily number of new people tested (positive or negative) by date reported

            - label: Cumulative people tested
              value: cumPeopleTestedByPublishDate
              type: numeric
              tooltip: Cumulative total number of people tested (positive or negative) by date reported

        - heading: About 
          tabType: metadata
          filename: cardMetadata/testing/cardPeopleTested.md

# {{ EndDevOnlyBlock }}

##############################################################################################################################

# {{ StartDevOnlyBlock }}
# # Not using this chart which shows which specimen dates the newly added cases refer to.  It's not useful now that
# # case numbers are so low

#   # - heading: Newly reported and total daily cases by specimen date
#   #   cardType: chart
#   #   fullWidth: true

#   # download:
#   #   - newCasesBySpecimenDate
#   #   - changeInNewCasesBySpecimenDate
#   #   - previouslyReportedNewCasesBySpecimenDate

#   #   tabs: 
#   #     - heading: Chart
#   #       tabType: chart
#   #       barType: overlay
#   #       fields:
#   #         - label: Total cases
#   #           value: newCasesBySpecimenDate
#   #           tooltip: Daily number of new people with a lab-confirmed positive test result by date the sample was taken from the person
#   #           type: bar
#   #           colour: 0
#   #           rollingAverage: false

#   #         - label: Change from previous day
#   #           value: changeInNewCasesBySpecimenDate
#   #           tooltip: Change in numbers of cases reported on {date} from previously reported
#   #           type: bar
#   #           colour: 9
#   #           rollingAverage: false

#   #         - label: Cases (7-day average)
#   #           value: newCasesBySpecimenDate
#   #           tooltip: 7 day rolling average of the daily number of cases by specimen date
#   #           type: line
#   #           colour: 3
#   #           fill: false
#   #           rollingAverage: true
 
#   #     - heading: Data
#   #       tabType: table
#   #       fields:
#   #         - label: Specimen date
#   #           value: date
#   #           type: date
#   #           tooltip: Date the sample was taken from the person

#   #         - label: Daily cases
#   #           value: previouslyReportedNewCasesBySpecimenDate
#   #           type: numeric
#   #           tooltip: Number of new people with a lab-confirmed positive test result as reported on {date-1}

#   #         - label: Cumulative cases
#   #           value: changeInNewCasesBySpecimenDate
#   #           type: numeric
#   #           tooltip: Change in number of new people with a lab-confirmed positive test result reported on {date}

# {{ EndDevOnlyBlock }}

##############################################################################################################################

  - heading: Cases by age and sex
    caption: Counts
    cardType: ageSexBreakdown
    locationAware:
      included:
        areaType:
          - nation
          - region

    fullWidth: false
    abstract: > 
      Number of people with at least one lab-confirmed COVID-19 positive test result since the
      start of the pandemic, by age and sex.

    download:
      - femaleCasesValue 
      - femaleCasesRate
      - maleCasesValue
      - maleCasesRate

    tabs: 
      - heading: Chart
        tabType: chart
        barType: group
        groupKey: age
        groupValues: 
          - value
          - rate

        requiredMetrics:
          - femaleCases
          - maleCases

        fields:
          - label: Females
            value: femaleCasesValue
            tooltip: Total number of females with a lab-confirmed positive test result
            type: bar
            colour: 3
            
          - label: Males
            value: maleCasesValue
            tooltip: Total number of males with a lab-confirmed positive test result
            type: bar
            colour: 0
      
      - heading: Data
        tabType: table
        groupKey: age
        groupValues: 
          - value
          - rate

        requiredMetrics:
          - femaleCases
          - maleCases

        fields:
          - label: Age
            value: age
            type: string
            tooltip: Age group

          - label: Females
            value: femaleCasesValue
            type: numeric
            tooltip: Total number of females with a lab-confirmed positive test result

          - label: Female rate
            value: femaleCasesRate
            type: numeric
            tooltip: Total number of female cases per 100,000 resident population

          - label: Males
            value: maleCasesValue
            type: numeric
            tooltip: Total number of males with a lab-confirmed positive test result
          
          - label: Male rate 
            value: maleCasesRate
            type: numeric
            tooltip: Total number of male cases per 100,000 resident population

      - heading: About 
        tabType: metadata
        filename: cardMetadata/cases/cardCasesAndRatesByAgeAndSex.md

##############################################################################################################################

  - heading: Case rates by age and sex 
    caption: Rates per 100,000 resident population
    cardType: ageSexBreakdown
    locationAware:
      included:
        areaType:
          - nation
          - region

    fullWidth: false
    abstract: >
      Total case rates by age and sex.  There are fewer people in the oldest age groups so the
      rates show the relative impact on different age groups.

    tabs: 
      - heading: Chart
        tabType: chart
        barType: group
        groupKey: age
        groupValues: 
          - value
          - rate

        requiredMetrics:
          - femaleCases
          - maleCases

        fields:
          - label: Females
            value: femaleCasesRate
            tooltip: Total number of female cases per 100,000 resident population
            type: bar
            colour: 3
            
          - label: Males
            value: maleCasesRate
            tooltip: Total number of male cases per 100,000 resident population
            type: bar
            colour: 0
      
      - heading: Data
        tabType: table
        groupKey: age
        groupValues: 
          - value
          - rate

        requiredMetrics:
          - femaleCases
          - maleCases

        fields:
          - label: Age
            value: age
            type: string
            tooltip: Age group

          - label: Female cases
            value: femaleCasesValue
            type: numeric
            tooltip: Total number of females with a lab-confirmed positive test result

          - label: Female rate
            value: femaleCasesRate
            type: numeric
            tooltip: Total number of female cases per 100,000 resident population

          - label: Male cases
            value: maleCasesValue
            type: numeric
            tooltip: Total number of males with a lab-confirmed positive test result
          
          - label: Male rate
            value: maleCasesRate
            type: numeric
            tooltip: Total number of female cases per 100,000 resident population

      - heading: About 
        tabType: metadata
        filename: cardMetadata/cases/cardCasesAndRatesByAgeAndSex.md

##############################################################################################################################

# {{ StartDevOnlyBlock }}
# # Not currently publishing people tested
# # TODO: PF to check - GA 20200717 - not added abstracts as not yet publishing - shouldn't this sit on the testing page?

#   - heading: People tested, by age and sex
#     caption: Counts
#     cardType: ageSexBreakdown
#     locationAware:
#       included:
#         areaType:
#           - nation
#           - region
  
#     fullWidth: false
#     download:
#       - femalePeopleTestedValue
#       - femalePeopleTestedRate
#       - malePeopleTestedValue
#       - malePeopleTestedRate

#     tabs: 
#       - heading: Chart
#         tabType: chart
#         barType: group
#         groupKey: age
#         groupValues: 
#           - value
#           - rate

#         requiredMetrics:
#           - femalePeopleTested
#           - malePeopleTested

#         fields:
#           - label: Females
#             value: femalePeopleTestedValue
#             tooltip: Total number of females tested (positive or negative)
#             type: bar
#             colour: 3
            
#           - label: Males
#             value: malePeopleTestedValue
#             tooltip: Total number of males tested (positive or negative)
#             type: bar
#             colour: 0
      
#       - heading: Data
#         tabType: table
#         groupKey: age
#         groupValues: 
#           - value
#           - rate

#         requiredMetrics:
#           - femalePeopleTested
#           - malePeopleTested

#         fields:
#           - label: Age
#             value: age
#             type: string
#             tooltip: Age group

#           - label: Females
#             value: femalePeopleTestedValue
#             type: numeric
#             tooltip: Total number of females tested (positive or negative)

#           - label: Female rate
#             value: femalePeopleTestedRate
#             type: numeric
#             tooltip: Total number of females tested (positive or negative) per 100,000 resident population

#           - label: Males
#             value: malePeopleTestedValue
#             type: numeric
#             tooltip: Total number of males tested (positive or negative)
          
#           - label: Male rate
#             value: malePeopleTestedRate
#             type: numeric
#             tooltip: Total number of males tested (positive or negative) per 100,000 resident population

#       - heading: About 
#         tabType: metadata
#         filename: cardMetadata/testing/tabPeopleTestedByAgeAndSex.md

##############################################################################################################################

#   - heading: People tested rates by age and sex
#     caption: Rates per 100,000 resident population
#     cardType: ageSexBreakdown
#     locationAware:
#       included:
#         areaType:
#           - nation
#           - region

#     fullWidth: false
#     download:
#       - femalePeopleTestedValue
#       - femalePeopleTestedRate
#       - malePeopleTestedValue
#       - malePeopleTestedRate

#     tabs: 
#       - heading: Chart
#         tabType: chart
#         barType: group
#         groupKey: age
#         groupValues: 
#           - value
#           - rate

#         requiredMetrics:
#           - femalePeopleTested
#           - malePeopleTested

#         fields:
#           - label: Females
#             value: femalePeopleTestedRate
#             tooltip: Total number of females tested (positive or negative) per 100,000 resident population
#             type: bar
#             colour: 3
            
#           - label: Males
#             value: malePeopleTestedRate
#             tooltip: Total number of males tested (positive or negative) per 100,000 resident population
#             type: bar
#             colour: 0
      
#       - heading: Data
#         tabType: table
#         groupKey: age
#         groupValues: 
#           - value
#           - rate

#         requiredMetrics:
#           - femalePeopleTested
#           - malePeopleTested

#         fields:
#           - label: Age
#             value: age
#             type: string
#             tooltip: Age group

#           - label: Female cases
#             value: femalePeopleTestedValue
#             type: numeric
#             tooltip: Total number of females tested (positive or negative)

#           - label: Female rate
#             value: femalePeopleTestedRate
#             type: numeric
#             tooltip: Total number of females tested (positive or negative) per 100,000 resident population

#           - label: Male cases
#             value: malePeopleTestedValue
#             type: numeric
#             tooltip: Total number of males tested (positive or negative)
          
#           - label: Male rate
#             value: malePeopleTestedRate
#             type: numeric
#             tooltip: Total number of females tested (positive or negative) per 100,000 resident population

#       - heading: About 
#         tabType: metadata
#         filename: cardMetadata/testing/tabPeopleTestedByAgeAndSex.md

# {{ EndDevOnlyBlock }}

##############################################################################################################################

# {{ StartDevOnlyBlock }}
# Scatterplot not a valid cardType yet - not built

  # - heading: Cases and testing rates
  #   cardType: scatterStatic
  #   fullWidth: false
  #   userOptions: areaType # linked to map and table below?
  #   x-label: People tested per 100,000 population
  #   x-value: CumPeopleTestedByPublishDateRate
  #   x-tooltip: Cumulative total number of people tested (positive or negative) per 100,000 resident population

  #   y-label: Cases per 100,000 population
  #   y-value: CumCasesByPublishDateRate
  #   y-tooltip: Cumulative total number of new people with a lab-confirmed positive test result per 100,000 resident population

  # - heading: Cases rates by area
  #   cardType: mapStatic
  #   fullWidth: false
  #   userOptions: areaType # linked to scatter chart above and table below?
  #   value: cumCasesByPublishDateRate
  #   tooltip: areaName

# {{ EndDevOnlyBlock }}

##############################################################################################################################

  - heading: Cases by area
    cardType: simpleTableStatic
    fullWidth: false
    abstract: >
      Total number of people with at least one lab-confirmed positive COVID-19 test result since the start
      of the pandemic in each area. The rates per 100,000 resident population give a fairer comparison of
      the number of cases in each area but they do not take account of the different rates of testing or
      differences in the age and sex of the local populations. Only data available for the latest reported
      date are shown.

    download:
      - cumCasesByPublishDate
      - cumCasesByPublishDateRate

    tabs:
      - heading: Nation
        tabType: table
        params:
          - key: areaType
            sign: "="
            value: nation

        latestBy: cumCasesByPublishDate
        sortBy: areaName

        fields:
          - label: Area
            value: areaName
            type: string
            tooltip: ""

          - label: Cases
            value: cumCasesByPublishDate
            type: numeric
            tooltip: Cumulative total number of people with a lab-confirmed positive test result up to {date}

          - label: Rate per 100,000 population
            value: cumCasesByPublishDateRate
            type: numeric
            tooltip: Rate of total confirmed cases per 100,000 resident population

      - heading: Region
        tabType: table
        params:
          - key: areaType
            sign: "="
            value: region

        latestBy: cumCasesByPublishDate
        sortBy: areaName

        fields:
          - label: Area
            value: areaName
            type: string
            tooltip: ""

          - label: Cases
            value: cumCasesByPublishDate
            type: numeric
            tooltip: Cumulative total number of people with a lab-confirmed positive test result up to {date}

          - label: Rate per 100,000 population
            value: cumCasesByPublishDateRate
            type: numeric
            tooltip: Rate of total confirmed cases per 100,000 resident population

      - heading: Upper tier LA
        tabType: table
        params:
          - key: areaType
            sign: "="
            value: utla

        latestBy: cumCasesByPublishDate
        sortBy: areaName
        searchBy: areaName

        fields:
          - label: Area
            value: areaName
            type: string
            tooltip: ""

          - label: Cases
            value: cumCasesByPublishDate
            type: numeric
            tooltip: Cumulative total number of people with a lab-confirmed positive test result up to {date}

          - label: Rate per 100,000 population
            value: cumCasesByPublishDateRate
            type: numeric
            tooltip: Rate of total confirmed cases per 100,000 resident population

      - heading: Lower tier LA
        tabType: table
        params:
          - key: areaType
            sign: "="
            value: ltla

        latestBy: cumCasesByPublishDate
        sortBy: areaName
        searchBy: areaName

        fields:
          - label: Area
            value: areaName
            type: string
            tooltip: ""

          - label: Cases
            value: cumCasesByPublishDate
            type: numeric
            tooltip: Cumulative total number of people with a lab-confirmed positive test result up to {date}

          - label: Rate per 100,000 population
            value: cumCasesByPublishDateRate
            type: numeric
            tooltip: Rate of total confirmed cases per 100,000 resident population

      - heading: About
        tabType: metadata
        filename: cardMetadata/cases/cardCasesAndRatesByArea.md

##############################################################################################################################

  - heading: Cases by local area in England
    cardType: simpleExternalStatic
    # locationAware:
    #   excluded:
    #     areaName:
    #       - Northern Ireland
    #       - Scotland
    #       - Wales

    fullWidth: false
    abstract: >
      COVID-19 cases (number of people with a lab-confirmed positive test result) in England
      by Middle Super Output Area (MSOA).  MSOAs are small areas with around 7,200 average
      population.  The data are updated each weekday, and show the latest 7 days for which
      complete data are available.

    image: 
      url: https://c19pubdev.azureedge.net/assets/images/msoa-outline.png
      alt: >
        Outline of the Middle Super Output Area (MSOA) map
        boundaries (not data included)

    resource: 
      label: View map
      url: https://arcgis.com/apps/webappviewer/index.html?id=47574f7a6e454dc6a42c5f6912ed7076

    download:
      - format: CSV
        url: https://coronavirus.data.gov.uk/downloads/msoa_data/MSOAs_latest.csv
      
      - format: JSON
        url: https://coronavirus.data.gov.uk/downloads/msoa_data/MSOAs_latest.json
      
      - format: XML
        url: https://coronavirus.data.gov.uk/downloads/msoa_data/MSOAs_latest.xml

      - format: Spreadsheet
        url: https://coronavirus.data.gov.uk/downloads/msoa_data/MSOAs_latest.xlsx
